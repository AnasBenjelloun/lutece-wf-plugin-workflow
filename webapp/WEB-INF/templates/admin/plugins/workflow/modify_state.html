<#include "macro_workflows.html" />
<@row>
	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
		<@fieldSet>
			<@tabs>
				<@tabList>
					<@tabLink active=true href='jsp/admin/plugins/workflow/ModifyState.jsp?id_state=${state.id}' title='#i18n{workflow.modify_state.title}'/>
					<@tabLink href='jsp/admin/plugins/workflow/GetModifyReflexiveAction.jsp?id_state=${state.id}' title='#i18n{workflow.modify_reflexive_action.title}'/>
				</@tabList>
				<@tabContent>
					<@tform action='jsp/admin/plugins/workflow/DoModifyState.jsp?plugin_name=workflow'>
						<@input type='hidden' name='id_state' value=state.id/>
						<@fieldInputText i18nLabelKey='workflow.create_state.label_name' inputName='name' value=state.name mandatory=true i18nHelpBlockKey='workflow.create_state.label_name_comment' maxlength=255/>
						<@fieldTextArea i18nLabelKey='workflow.create_action.label_description' inputName='description' value=state.description mandatory=true i18nHelpBlockKey='workflow.create_action.label_description_comment'/>
						<@fieldInputWrapper i18nLabelKey='workflow.create_state.label_initial_state' inputName='is_initial_state' i18nHelpBlockKey='workflow.create_state.label_initial_state_comment'>
							<@checkBox name='is_initial_state' value='1' checked=state.isInitialState( ) />
						</@fieldInputWrapper>
						<@fieldInputWrapper i18nLabelKey='workflow.create_state.label_required_workgroup_assigned' inputName='is_required_workgroup_assigned' i18nHelpBlockKey='workflow.create_state.label_required_workgroup_assigned_comment'>
							<@checkBox name='is_required_workgroup_assigned' value='1' checked=state.isRequiredWorkgroupAssigned( ) />
						</@fieldInputWrapper>
						<@formGroup labelFor='id_icon' labelKey='#i18n{workflow.create_state.label_icon}' helpKey='#i18n{workflow.create_state.label_icon_comment}'>
							<@radioIconList name="id_icon" default_value=state.icon.id icons=icon_list />
							<@radioButton orientation='horizontal' name='id_icon' value='-1' checked=state.icon.id==0 labelKey='#i18n{workflow.create_state.label_no_icon}' />
						</@formGroup>
						<@formGroup>
							<@button size='sm' type='submit' name='save' buttonIcon='check' title='#i18n{workflow.create_state.button_save}' />
							<@button size='sm' type='submit' name='cancel' buttonIcon='times-circle' title='#i18n{workflow.create_state.button_cancel}' cancel=true />
						</@formGroup>
					</@tform>
				</@tabContent>
			</@tabs>
		</@fieldSet>
	</div>
</@row>
